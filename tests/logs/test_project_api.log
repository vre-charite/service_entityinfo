2021-05-12 16:29:21 INFO     

2021-05-12 16:29:21 INFO     Preparing testing project-------------------------------------------------------
2021-05-12 16:29:21 INFO     POST API: http://10.3.7.216:5062/v1/neo4j/nodes/Dataset
2021-05-12 16:29:21 INFO     POST params: {'name': 'EntityInfoUnitTest', 'path': 'unittest_entity_info', 'code': 'unittest_entity_info', 'description': 'Project created by unit test, will be deleted soon...', 'discoverable': 'true', 'type': 'Usecase', 'tags': ['test'], 'global_entity_id': '85c1ac1f-d145-45f6-9573-56b04f404bd7-1620851396'}
2021-05-12 16:29:21 INFO     RESPONSE DATA: [{"id": 4224, "labels": ["Dataset"], "name": "EntityInfoUnitTest", "time_created": "2021-05-12T20:29:56", "time_lastmodified": "2021-05-12T20:29:56", "path": "unittest_entity_info", "code": "unittest_entity_info", "description": "Project created by unit test, will be deleted soon...", "discoverable": "true", "type": "Usecase", "tags": ["test"], "global_entity_id": "85c1ac1f-d145-45f6-9573-56b04f404bd7-1620851396"}]

2021-05-12 16:29:21 INFO     RESPONSE STATUS: 200
2021-05-12 16:29:21 INFO     project ID: 4224
2021-05-12 16:29:21 INFO     

2021-05-12 16:29:21 INFO     Creating testing file-----------------------------------------------------------
2021-05-12 16:29:21 INFO     Getting global entity ID: {"code": 200, "error_msg": "", "result": "aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397"}

2021-05-12 16:29:21 INFO     File created in /data/vre-storage/unittest_entity_info/raw
2021-05-12 16:29:21 INFO     POST API: http://10.3.7.216:5062/v1/neo4j/nodes/File
2021-05-12 16:29:21 INFO     POST payload: {'file_size': 1000, 'full_path': '/data/vre-storage/unittest_entity_info/raw/entity_info_test_1', 'path': '/data/vre-storage/unittest_entity_info/raw', 'generate_id': 'undefined', 'guid': 'unittest_guid', 'namespace': 'greenroom', 'uploader': 'unittest', 'project_id': 4224, 'name': 'entity_info_test_1', 'input_file_id': 'aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397', 'process_pipeline': 'raw', 'operator': 'entity_info_unittest', 'tags': ['tag1', 'tag2'], 'global_entity_id': 'aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397', 'parent_folder_geid': 'None', 'project_code': 'unittest_entity_info', 'extra_labels': ['Greenroom']}
2021-05-12 16:29:21 INFO     RESPONSE DATA: [{"id": 4225, "labels": ["File", "Greenroom"], "name": "entity_info_test_1", "time_created": "2021-05-12T20:29:57", "time_lastmodified": "2021-05-12T20:29:57", "file_size": 1000, "full_path": "/data/vre-storage/unittest_entity_info/raw/entity_info_test_1", "path": "/data/vre-storage/unittest_entity_info/raw", "generate_id": "undefined", "guid": "unittest_guid", "namespace": "greenroom", "uploader": "unittest", "project_id": 4224, "input_file_id": "aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397", "process_pipeline": "raw", "operator": "entity_info_unittest", "tags": ["tag1", "tag2"], "global_entity_id": "aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397", "parent_folder_geid": "None", "project_code": "unittest_entity_info"}]

2021-05-12 16:29:21 INFO     RESPONSE STATUS: 200
2021-05-12 16:29:21 INFO     Create relation res: "success"

2021-05-12 16:29:21 INFO     

2021-05-12 16:29:21 INFO     Creating testing file-----------------------------------------------------------
2021-05-12 16:29:21 INFO     Getting global entity ID: {"code": 200, "error_msg": "", "result": "8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397"}

2021-05-12 16:29:21 INFO     File created in /vre-data/unittest_entity_info
2021-05-12 16:29:21 INFO     POST API: http://10.3.7.216:5062/v1/neo4j/nodes/File
2021-05-12 16:29:21 INFO     POST payload: {'file_size': 1000, 'full_path': '/vre-data/unittest_entity_info/entity_info_test_3', 'path': '/vre-data/unittest_entity_info', 'generate_id': 'undefined', 'guid': 'unittest_guid', 'namespace': 'vrecore', 'uploader': 'unittest', 'project_id': 4224, 'name': 'entity_info_test_3', 'input_file_id': '8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397', 'process_pipeline': 'raw', 'operator': 'entity_info_unittest', 'tags': ['tag1', 'tag2'], 'global_entity_id': '8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397', 'parent_folder_geid': 'None', 'project_code': 'unittest_entity_info', 'extra_labels': ['VRECore']}
2021-05-12 16:29:22 INFO     RESPONSE DATA: [{"id": 4226, "labels": ["File", "VRECore"], "name": "entity_info_test_3", "time_created": "2021-05-12T20:29:57", "time_lastmodified": "2021-05-12T20:29:57", "file_size": 1000, "full_path": "/vre-data/unittest_entity_info/entity_info_test_3", "path": "/vre-data/unittest_entity_info", "generate_id": "undefined", "guid": "unittest_guid", "namespace": "vrecore", "uploader": "unittest", "project_id": 4224, "input_file_id": "8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397", "process_pipeline": "raw", "operator": "entity_info_unittest", "tags": ["tag1", "tag2"], "global_entity_id": "8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397", "parent_folder_geid": "None", "project_code": "unittest_entity_info"}]

2021-05-12 16:29:22 INFO     RESPONSE STATUS: 200
2021-05-12 16:29:22 INFO     Create relation res: "success"

2021-05-12 16:29:22 INFO     

2021-05-12 16:29:22 INFO     Creating testing folder---------------------------------------------------------
2021-05-12 16:29:22 INFO     RESPONSE DATA: {"code":200,"error_msg":"","page":0,"total":1,"num_of_pages":1,"result":{"id":4227,"labels":["Greenroom","Folder"],"name":"entityinfo_unittest_folder","time_created":"2021-05-12T20:29:57","time_lastmodified":"2021-05-12T20:29:57","global_entity_id":"entity_info_meta_test_geid","folder_level":0,"folder_relative_path":"","project_code":"unittest_entity_info","tags":[],"list_priority":10,"uploader":"EntityInfoUnittest"}}
2021-05-12 16:29:22 INFO     RESPONSE STATUS: 200
2021-05-12 16:29:22 INFO     Project ID: 4224
2021-05-12 16:29:22 INFO     Raw File Info: {'id': 4225, 'labels': ['File', 'Greenroom'], 'name': 'entity_info_test_1', 'time_created': '2021-05-12T20:29:57', 'time_lastmodified': '2021-05-12T20:29:57', 'file_size': 1000, 'full_path': '/data/vre-storage/unittest_entity_info/raw/entity_info_test_1', 'path': '/data/vre-storage/unittest_entity_info/raw', 'generate_id': 'undefined', 'guid': 'unittest_guid', 'namespace': 'greenroom', 'uploader': 'unittest', 'project_id': 4224, 'input_file_id': 'aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397', 'process_pipeline': 'raw', 'operator': 'entity_info_unittest', 'tags': ['tag1', 'tag2'], 'global_entity_id': 'aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397', 'parent_folder_geid': 'None', 'project_code': 'unittest_entity_info'}
2021-05-12 16:29:22 INFO     Core File Info: {'id': 4226, 'labels': ['File', 'VRECore'], 'name': 'entity_info_test_3', 'time_created': '2021-05-12T20:29:57', 'time_lastmodified': '2021-05-12T20:29:57', 'file_size': 1000, 'full_path': '/vre-data/unittest_entity_info/entity_info_test_3', 'path': '/vre-data/unittest_entity_info', 'generate_id': 'undefined', 'guid': 'unittest_guid', 'namespace': 'vrecore', 'uploader': 'unittest', 'project_id': 4224, 'input_file_id': '8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397', 'process_pipeline': 'raw', 'operator': 'entity_info_unittest', 'tags': ['tag1', 'tag2'], 'global_entity_id': '8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397', 'parent_folder_geid': 'None', 'project_code': 'unittest_entity_info'}
2021-05-12 16:29:22 INFO     

2021-05-12 16:29:22 INFO     ------------------------------01 test get_raw_file------------------------------
2021-05-12 16:29:22 INFO     Result: {"code":200,"error_msg":"","page":0,"total":1,"num_of_pages":1,"result":[{"id":4225,"labels":["File","Greenroom"],"global_entity_id":"aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397","input_file_id":"aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397","project_code":"unittest_entity_info","operator":"entity_info_unittest","file_size":1000,"tags":["tag1","tag2"],"path":"/data/vre-storage/unittest_entity_info/raw","time_lastmodified":"2021-05-12T20:29:57","project_id":4224,"uploader":"unittest","process_pipeline":"raw","parent_folder_geid":"None","namespace":"greenroom","name":"entity_info_test_1","time_created":"2021-05-12T20:29:57","guid":"unittest_guid","full_path":"/data/vre-storage/unittest_entity_info/raw/entity_info_test_1","generate_id":"undefined"}]}
2021-05-12 16:29:22 INFO     COMPARING CODE: 200 VS 200
2021-05-12 16:29:22 INFO     {'code': 200, 'error_msg': '', 'page': 0, 'total': 1, 'num_of_pages': 1, 'result': [{'id': 4225, 'labels': ['File', 'Greenroom'], 'global_entity_id': 'aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397', 'input_file_id': 'aa01c4c1-3074-4e41-b7c6-4142fc75b61f-1620851397', 'project_code': 'unittest_entity_info', 'operator': 'entity_info_unittest', 'file_size': 1000, 'tags': ['tag1', 'tag2'], 'path': '/data/vre-storage/unittest_entity_info/raw', 'time_lastmodified': '2021-05-12T20:29:57', 'project_id': 4224, 'uploader': 'unittest', 'process_pipeline': 'raw', 'parent_folder_geid': 'None', 'namespace': 'greenroom', 'name': 'entity_info_test_1', 'time_created': '2021-05-12T20:29:57', 'guid': 'unittest_guid', 'full_path': '/data/vre-storage/unittest_entity_info/raw/entity_info_test_1', 'generate_id': 'undefined'}]}
2021-05-12 16:29:22 INFO     

2021-05-12 16:29:22 INFO     ---------------------------03 test get_vre_core_file----------------------------
2021-05-12 16:29:22 INFO     PAYLOAD: {'type': 'raw', 'zone': 'vrecore', 'file_relative_path': 'entity_info_test_3'}
2021-05-12 16:29:22 INFO     {"code":200,"error_msg":"","page":0,"total":1,"num_of_pages":1,"result":[{"id":4226,"labels":["File","VRECore"],"global_entity_id":"8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397","input_file_id":"8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397","project_code":"unittest_entity_info","operator":"entity_info_unittest","file_size":1000,"tags":["tag1","tag2"],"path":"/vre-data/unittest_entity_info","time_lastmodified":"2021-05-12T20:29:57","project_id":4224,"process_pipeline":"raw","uploader":"unittest","parent_folder_geid":"None","name":"entity_info_test_3","namespace":"vrecore","time_created":"2021-05-12T20:29:57","guid":"unittest_guid","full_path":"/vre-data/unittest_entity_info/entity_info_test_3","generate_id":"undefined"}]}
2021-05-12 16:29:22 INFO     COMPARING CODE: 200 VS 200
2021-05-12 16:29:22 INFO     {'code': 200, 'error_msg': '', 'page': 0, 'total': 1, 'num_of_pages': 1, 'result': [{'id': 4226, 'labels': ['File', 'VRECore'], 'global_entity_id': '8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397', 'input_file_id': '8ae47d2a-dfda-4071-9a9e-c23d4050fb75-1620851397', 'project_code': 'unittest_entity_info', 'operator': 'entity_info_unittest', 'file_size': 1000, 'tags': ['tag1', 'tag2'], 'path': '/vre-data/unittest_entity_info', 'time_lastmodified': '2021-05-12T20:29:57', 'project_id': 4224, 'process_pipeline': 'raw', 'uploader': 'unittest', 'parent_folder_geid': 'None', 'name': 'entity_info_test_3', 'namespace': 'vrecore', 'time_created': '2021-05-12T20:29:57', 'guid': 'unittest_guid', 'full_path': '/vre-data/unittest_entity_info/entity_info_test_3', 'generate_id': 'undefined'}]}
2021-05-12 16:29:22 INFO     

2021-05-12 16:29:22 INFO     -----------------------------04 test non_exist_file-----------------------------
2021-05-12 16:29:22 INFO     <Response [404]>
2021-05-12 16:29:22 INFO     COMPARING CODE: 404 VS 404
2021-05-12 16:29:22 INFO     {'code': 404, 'error_msg': 'File not found', 'page': 0, 'total': 1, 'num_of_pages': 1, 'result': []}
2021-05-12 16:29:22 INFO     COMPARING: [] VS '[]'
2021-05-12 16:29:22 INFO     COMPARING: File not found VS File not found
2021-05-12 16:29:22 INFO     

2021-05-12 16:29:22 INFO     ------------------------05 test get_file_with_wrong_type------------------------
2021-05-12 16:29:22 INFO     <Response [400]>
2021-05-12 16:29:22 INFO     COMPARING CODE: 400 VS 400
2021-05-12 16:29:22 INFO     {'code': 400, 'error_msg': 'Invalid type faketype', 'page': 0, 'total': 1, 'num_of_pages': 1, 'result': {}}
2021-05-12 16:29:22 INFO     COMPARING error_msg: Invalid type faketype VS Invalid type faketype
2021-05-12 16:29:22 INFO     COMPARING result: {} VS 
2021-05-12 16:29:22 INFO     

2021-05-12 16:29:22 INFO     ------------------------06 test get_file_with_wrong_zone------------------------
2021-05-12 16:29:22 INFO     <Response [400]>
2021-05-12 16:29:22 INFO     COMPARING CODE: 400 VS 400
2021-05-12 16:29:22 INFO     {'code': 400, 'error_msg': 'Invalid zone', 'page': 0, 'total': 1, 'num_of_pages': 1, 'result': {}}
2021-05-12 16:29:22 INFO     COMPARING error_msg: Invalid zone VS Invalid zone
2021-05-12 16:29:22 INFO     COMPARING result: {} VS 
2021-05-12 16:29:22 INFO     

2021-05-12 16:29:22 INFO     START TEAR DOWN PROCESS
2021-05-12 16:29:22 INFO     File ID: [4225, 4226]
2021-05-12 16:29:22 INFO     File GUID: ['unittest_guid', 'unittest_guid']
2021-05-12 16:29:22 INFO     

2021-05-12 16:29:22 INFO     Preparing delete file node------------------------------------------------------
2021-05-12 16:29:23 INFO     DELETE STATUS: 200
2021-05-12 16:29:23 INFO     DELETE RESPONSE: "success"

2021-05-12 16:29:23 INFO     

2021-05-12 16:29:23 INFO     Preparing delete file node------------------------------------------------------
2021-05-12 16:29:23 INFO     DELETE STATUS: 200
2021-05-12 16:29:23 INFO     DELETE RESPONSE: "success"

2021-05-12 16:29:23 INFO     

2021-05-12 16:29:23 INFO     Preparing delete file entity----------------------------------------------------
2021-05-12 16:29:23 INFO     DELETE STATUS: 200
2021-05-12 16:29:23 INFO     DELETE RESPONSE: {"result": {}}

2021-05-12 16:29:23 INFO     

2021-05-12 16:29:23 INFO     Preparing delete file entity----------------------------------------------------
2021-05-12 16:29:23 INFO     DELETE STATUS: 200
2021-05-12 16:29:23 INFO     DELETE RESPONSE: {"result": {}}

2021-05-12 16:29:23 INFO     

2021-05-12 16:29:23 INFO     Preparing delete project--------------------------------------------------------
2021-05-12 16:29:23 INFO     DELETE Project: 4224
2021-05-12 16:29:23 INFO     DELETE STATUS: 200
2021-05-12 16:29:23 INFO     DELETE RESPONSE: "success"

2021-05-12 16:29:23 INFO     

2021-05-12 16:29:23 INFO     Preparing delete folder node----------------------------------------------------
2021-05-12 16:29:23 INFO     DELETE STATUS: 200
2021-05-12 16:29:23 INFO     DELETE RESPONSE: "success"

